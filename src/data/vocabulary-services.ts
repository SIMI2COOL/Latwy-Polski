import { VocabularyWord } from '@/types';

export const servicesVocabulary: VocabularyWord[] = [
  // NAGŁE WYPADKI (Emergencia)
  { id: 'emergency_001', polish: 'pogotowie ratunkowe', spanish: 'ambulancia', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_002', polish: 'policja', spanish: 'policía', category: 'services', subcategory: 'emergency', difficulty: 'beginner' },
  { id: 'emergency_003', polish: 'straż pożarna', spanish: 'bomberos', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_004', polish: 'wypadek', spanish: 'accidente', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_005', polish: 'nagły wypadek', spanish: 'emergencia', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_006', polish: 'pomoc', spanish: 'ayuda', category: 'services', subcategory: 'emergency', difficulty: 'beginner' },
  { id: 'emergency_007', polish: 'niebezpieczeństwo', spanish: 'peligro', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_008', polish: 'pożar', spanish: 'incendio', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_009', polish: 'kradzież', spanish: 'robo', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_010', polish: 'raport policyjny', spanish: 'denuncia', category: 'services', subcategory: 'emergency', difficulty: 'advanced' },
  { id: 'emergency_011', polish: 'numer alarmowy', spanish: 'número de emergencia', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },
  { id: 'emergency_012', polish: 'ratownik', spanish: 'paramédico', category: 'services', subcategory: 'emergency', difficulty: 'intermediate' },

  // BANK (Banco)
  { id: 'bank_001', polish: 'bank', spanish: 'banco', category: 'services', subcategory: 'bank', difficulty: 'beginner' },
  { id: 'bank_002', polish: 'konto', spanish: 'cuenta', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_003', polish: 'konto oszczędnościowe', spanish: 'cuenta de ahorros', category: 'services', subcategory: 'bank', difficulty: 'advanced' },
  { id: 'bank_004', polish: 'konto bieżące', spanish: 'cuenta corriente', category: 'services', subcategory: 'bank', difficulty: 'advanced' },
  { id: 'bank_005', polish: 'karta kredytowa', spanish: 'tarjeta de crédito', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_006', polish: 'karta debetowa', spanish: 'tarjeta de débito', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_007', polish: 'bankomat', spanish: 'cajero automático', category: 'services', subcategory: 'bank', difficulty: 'beginner' },
  { id: 'bank_008', polish: 'PIN', spanish: 'PIN', category: 'services', subcategory: 'bank', difficulty: 'beginner' },
  { id: 'bank_009', polish: 'wpłata', spanish: 'depósito', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_010', polish: 'wypłata', spanish: 'retiro', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_011', polish: 'przelew', spanish: 'transferencia', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_012', polish: 'pożyczka', spanish: 'préstamo', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },
  { id: 'bank_013', polish: 'odsetki', spanish: 'interés', category: 'services', subcategory: 'bank', difficulty: 'advanced' },
  { id: 'bank_014', polish: 'saldo', spanish: 'saldo', category: 'services', subcategory: 'bank', difficulty: 'intermediate' },

  // POCZTA (Correos)
  { id: 'post_001', polish: 'poczta', spanish: 'correos', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_002', polish: 'list', spanish: 'carta', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_003', polish: 'paczka', spanish: 'paquete', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_004', polish: 'znaczek', spanish: 'sello', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_005', polish: 'koperta', spanish: 'sobre', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_006', polish: 'adres', spanish: 'dirección', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },
  { id: 'post_007', polish: 'kod pocztowy', spanish: 'código postal', category: 'services', subcategory: 'post-office', difficulty: 'intermediate' },
  { id: 'post_008', polish: 'nadawca', spanish: 'remitente', category: 'services', subcategory: 'post-office', difficulty: 'intermediate' },
  { id: 'post_009', polish: 'odbiorca', spanish: 'destinatario', category: 'services', subcategory: 'post-office', difficulty: 'intermediate' },
  { id: 'post_010', polish: 'skrzynka pocztowa', spanish: 'buzón', category: 'services', subcategory: 'post-office', difficulty: 'intermediate' },
  { id: 'post_011', polish: 'poczta lotnicza', spanish: 'correo aéreo', category: 'services', subcategory: 'post-office', difficulty: 'intermediate' },
  { id: 'post_012', polish: 'przesyłka polecona', spanish: 'correo certificado', category: 'services', subcategory: 'post-office', difficulty: 'advanced' },
  { id: 'post_013', polish: 'pocztówka', spanish: 'postal', category: 'services', subcategory: 'post-office', difficulty: 'beginner' },

  // HOTEL (Hotel)
  { id: 'hotel_001', polish: 'hotel', spanish: 'hotel', category: 'services', subcategory: 'hotel', difficulty: 'beginner' },
  { id: 'hotel_002', polish: 'recepcja', spanish: 'recepción', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_003', polish: 'pokój', spanish: 'habitación', category: 'services', subcategory: 'hotel', difficulty: 'beginner' },
  { id: 'hotel_004', polish: 'pokój jednoosobowy', spanish: 'habitación individual', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_005', polish: 'pokój dwuosobowy', spanish: 'habitación doble', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_006', polish: 'rezerwacja', spanish: 'reserva', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_007', polish: 'zameldowanie', spanish: 'check-in', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_008', polish: 'wymeldowanie', spanish: 'check-out', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_009', polish: 'klucz', spanish: 'llave', category: 'services', subcategory: 'hotel', difficulty: 'beginner' },
  { id: 'hotel_010', polish: 'winda', spanish: 'ascensor', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_011', polish: 'obsługa pokojowa', spanish: 'servicio de habitaciones', category: 'services', subcategory: 'hotel', difficulty: 'advanced' },
  { id: 'hotel_012', polish: 'mini bar', spanish: 'minibar', category: 'services', subcategory: 'hotel', difficulty: 'intermediate' },
  { id: 'hotel_013', polish: 'śniadanie', spanish: 'desayuno', category: 'services', subcategory: 'hotel', difficulty: 'beginner' },
  { id: 'hotel_014', polish: 'parking', spanish: 'aparcamiento', category: 'services', subcategory: 'hotel', difficulty: 'beginner' },
];

export async function seedServicesVocabulary() {
  const { db } = await import('@/utils/database');
  
  try {
    // Get existing services vocabulary IDs
    const existingServices = await db.vocabulary.where('category').equals('services').toArray();
    const existingIds = new Set(existingServices.map(w => w.id));
    
    // Filter out words that already exist
    const newWords = servicesVocabulary.filter(word => !existingIds.has(word.id));
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new services words`);
    }
    
    // Always update total word count - use the actual array length, not database count
    // This ensures consistency across devices
    await db.categories.update('services', { totalWords: servicesVocabulary.length });
    const dbCount = await db.vocabulary.where('category').equals('services').count();
    console.log(`✅ Services vocabulary: ${servicesVocabulary.length} words (${dbCount} in database)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      const existingServices = await db.vocabulary.where('category').equals('services').toArray();
      const existingIds = new Set(existingServices.map(w => w.id));
      const newWords = servicesVocabulary.filter(word => !existingIds.has(word.id));
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
        } catch (e) {
          console.error('Error adding remaining services words:', e);
        }
      }
      
      // Always update total word count - use the actual array length, not database count
      // This ensures consistency across devices
      await db.categories.update('services', { totalWords: servicesVocabulary.length });
      const dbCount = await db.vocabulary.where('category').equals('services').count();
      console.log(`✅ Services vocabulary: ${servicesVocabulary.length} words (${dbCount} in database)`);
      return true;
    }
    console.error('Error seeding services vocabulary:', error);
    return false;
  }
}
