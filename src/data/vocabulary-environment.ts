import { VocabularyWord } from '@/types';

export const environmentVocabulary: VocabularyWord[] = [
  // KOSMOS (Space)
  { id: 'space_001', polish: 'słońce', spanish: 'sun', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_002', polish: 'księżyc', spanish: 'moon', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_003', polish: 'gwiazda', spanish: 'star', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_004', polish: 'planeta', spanish: 'planet', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_005', polish: 'galaktyka', spanish: 'galaxy', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_006', polish: 'kometa', spanish: 'comet', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_007', polish: 'meteor', spanish: 'meteor', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_008', polish: 'satelita', spanish: 'satellite', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_009', polish: 'statek kosmiczny', spanish: 'spacecraft', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_010', polish: 'astronauta', spanish: 'astronaut', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },

  // ZIEMIA (Earth)
  { id: 'earth_001', polish: 'kontynent', spanish: 'continent', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_002', polish: 'ocean', spanish: 'ocean', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_003', polish: 'morze', spanish: 'sea', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_004', polish: 'wyspa', spanish: 'island', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_005', polish: 'półwysep', spanish: 'peninsula', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_006', polish: 'zatoka', spanish: 'bay', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_007', polish: 'wybrzeże', spanish: 'coast', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_008', polish: 'plaża', spanish: 'beach', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_009', polish: 'klif', spanish: 'cliff', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_010', polish: 'rafa koralowa', spanish: 'coral reef', category: 'environment', subcategory: 'earth', difficulty: 'advanced' },

  // KRAJOBRAZ (Landscape)
  { id: 'landscape_001', polish: 'góra', spanish: 'mountain', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_002', polish: 'wzgórze', spanish: 'hill', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_003', polish: 'dolina', spanish: 'valley', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_004', polish: 'wulkan', spanish: 'volcano', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_005', polish: 'jaskinia', spanish: 'cave', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_006', polish: 'pustynia', spanish: 'desert', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_007', polish: 'las', spanish: 'forest', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_008', polish: 'dżungla', spanish: 'jungle', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_009', polish: 'łąka', spanish: 'meadow', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_010', polish: 'pole', spanish: 'field', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },

  // POGODA (Weather)
  { id: 'weather_001', polish: 'pogoda', spanish: 'weather', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_002', polish: 'słońce', spanish: 'sunshine', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_003', polish: 'deszcz', spanish: 'rain', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_004', polish: 'śnieg', spanish: 'snow', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_005', polish: 'grad', spanish: 'hail', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_006', polish: 'wiatr', spanish: 'wind', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_007', polish: 'burza', spanish: 'storm', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_008', polish: 'piorun', spanish: 'lightning', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_009', polish: 'grzmot', spanish: 'thunder', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_010', polish: 'mgła', spanish: 'fog', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_011', polish: 'chmura', spanish: 'cloud', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_012', polish: 'tęcza', spanish: 'rainbow', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_013', polish: 'temperatura', spanish: 'temperature', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_014', polish: 'gorąco', spanish: 'calor', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_015', polish: 'zimno', spanish: 'frío', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },

  // ZWIERZĘTA (Animals)
  { id: 'animals_001', polish: 'pies', spanish: 'dog', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_002', polish: 'kot', spanish: 'cat', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_003', polish: 'koń', spanish: 'horse', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_004', polish: 'krowa', spanish: 'cow', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_005', polish: 'świnia', spanish: 'pig', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_006', polish: 'owca', spanish: 'sheep', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_007', polish: 'koza', spanish: 'goat', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_008', polish: 'kurczak', spanish: 'chicken', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_009', polish: 'królik', spanish: 'rabbit', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_010', polish: 'słoń', spanish: 'elephant', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_011', polish: 'lew', spanish: 'lion', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_012', polish: 'tygrys', spanish: 'tiger', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_013', polish: 'niedźwiedź', spanish: 'bear', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_014', polish: 'małpa', spanish: 'monkey', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_015', polish: 'żyrafa', spanish: 'giraffe', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_016', polish: 'zebra', spanish: 'zebra', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_017', polish: 'wilk', spanish: 'wolf', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_018', polish: 'lis', spanish: 'fox', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_019', polish: 'jeleń', spanish: 'deer', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_020', polish: 'wiewiórka', spanish: 'squirrel', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },

  // PTAKI (Birds)
  { id: 'birds_001', polish: 'ptak', spanish: 'bird', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_002', polish: 'orzeł', spanish: 'eagle', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_003', polish: 'sowa', spanish: 'owl', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_004', polish: 'gołąb', spanish: 'pigeon', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_005', polish: 'wrona', spanish: 'crow', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_006', polish: 'papuga', spanish: 'parrot', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_007', polish: 'pingwin', spanish: 'penguin', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_008', polish: 'łabędź', spanish: 'swan', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_009', polish: 'flamingo', spanish: 'flamingo', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_010', polish: 'pelikan', spanish: 'pelican', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },

  // ROŚLINY (Plants)
  { id: 'plants_001', polish: 'drzewo', spanish: 'tree', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_002', polish: 'kwiat', spanish: 'flower', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_003', polish: 'róża', spanish: 'rose', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_004', polish: 'tulipan', spanish: 'tulip', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_005', polish: 'słonecznik', spanish: 'sunflower', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_006', polish: 'trawa', spanish: 'grass', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_007', polish: 'krzak', spanish: 'bush', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_008', polish: 'liść', spanish: 'leaf', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_009', polish: 'gałąź', spanish: 'branch', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_010', polish: 'korzeń', spanish: 'root', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_011', polish: 'nasiono', spanish: 'seed', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_012', polish: 'kaktus', spanish: 'cactus', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
];

export async function seedEnvironmentVocabulary() {
  const { db, removeDuplicateVocabulary } = await import('@/utils/database');
  
  try {
    // First, remove any existing duplicates in the environment category
    await removeDuplicateVocabulary();
    
    // Get existing environment vocabulary
    const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
    const existingIds = new Set(existingEnvironment.map(w => w.id));
    
    // Also check for duplicates by Polish word + subcategory (case-insensitive)
    const existingByPolish = new Map<string, VocabularyWord>();
    for (const word of existingEnvironment) {
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      if (!existingByPolish.has(key)) {
        existingByPolish.set(key, word);
      }
    }
    
    // Filter out words that already exist (by ID or by Polish word + subcategory)
    const newWords = environmentVocabulary.filter(word => {
      if (existingIds.has(word.id)) return false;
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      return !existingByPolish.has(key);
    });
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new environment words`);
    }
    
    // Remove duplicates again after adding (in case of any edge cases)
    await removeDuplicateVocabulary();
    
    // Update total word count
    const totalCount = await db.vocabulary.where('category').equals('environment').count();
    await db.categories.update('environment', { totalWords: totalCount });
    console.log(`✅ Environment vocabulary: ${totalCount} total words (${environmentVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      await removeDuplicateVocabulary();
      const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
      const existingIds = new Set(existingEnvironment.map(w => w.id));
      const existingByPolish = new Map<string, VocabularyWord>();
      for (const word of existingEnvironment) {
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        if (!existingByPolish.has(key)) {
          existingByPolish.set(key, word);
        }
      }
      const newWords = environmentVocabulary.filter(word => {
        if (existingIds.has(word.id)) return false;
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        return !existingByPolish.has(key);
      });
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
          await removeDuplicateVocabulary();
          const totalCount = await db.vocabulary.where('category').equals('environment').count();
          await db.categories.update('environment', { totalWords: totalCount });
          console.log(`✅ Added ${newWords.length} new environment words. Total: ${totalCount}`);
        } catch (e) {
          console.error('Error adding remaining environment words:', e);
        }
      }
      return true;
    }
    console.error('Error seeding environment vocabulary:', error);
    return false;
  }
}
