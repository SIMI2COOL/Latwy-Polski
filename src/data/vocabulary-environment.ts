import { VocabularyWord } from '@/types';

export const environmentVocabulary: VocabularyWord[] = [
  // KOSMOS (Space)
  { id: 'space_001', polish: 'słońce', english: 'sun', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_002', polish: 'księżyc', english: 'moon', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_003', polish: 'gwiazda', english: 'star', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_004', polish: 'planeta', english: 'planet', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_005', polish: 'galaktyka', english: 'galaxy', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_006', polish: 'kometa', english: 'comet', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_007', polish: 'meteor', english: 'meteor', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_008', polish: 'satelita', english: 'satellite', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_009', polish: 'statek kosmiczny', english: 'spacecraft', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_010', polish: 'astronauta', english: 'astronaut', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },

  // ZIEMIA (Earth)
  { id: 'earth_001', polish: 'kontynent', english: 'continent', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_002', polish: 'ocean', english: 'ocean', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_003', polish: 'morze', english: 'sea', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_004', polish: 'wyspa', english: 'island', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_005', polish: 'półwysep', english: 'peninsula', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_006', polish: 'zatoka', english: 'bay', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_007', polish: 'wybrzeże', english: 'coast', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_008', polish: 'plaża', english: 'beach', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_009', polish: 'klif', english: 'cliff', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_010', polish: 'rafa koralowa', english: 'coral reef', category: 'environment', subcategory: 'earth', difficulty: 'advanced' },

  // KRAJOBRAZ (Landscape)
  { id: 'landscape_001', polish: 'góra', english: 'mountain', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_002', polish: 'wzgórze', english: 'hill', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_003', polish: 'dolina', english: 'valley', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_004', polish: 'wulkan', english: 'volcano', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_005', polish: 'jaskinia', english: 'cave', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_006', polish: 'pustynia', english: 'desert', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_007', polish: 'las', english: 'forest', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_008', polish: 'dżungla', english: 'jungle', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_009', polish: 'łąka', english: 'meadow', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_010', polish: 'pole', english: 'field', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },

  // POGODA (Weather)
  { id: 'weather_001', polish: 'pogoda', english: 'weather', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_002', polish: 'słońce', english: 'sunshine', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_003', polish: 'deszcz', english: 'rain', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_004', polish: 'śnieg', english: 'snow', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_005', polish: 'grad', english: 'hail', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_006', polish: 'wiatr', english: 'wind', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_007', polish: 'burza', english: 'storm', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_008', polish: 'piorun', english: 'lightning', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_009', polish: 'grzmot', english: 'thunder', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_010', polish: 'mgła', english: 'fog', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_011', polish: 'chmura', english: 'cloud', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_012', polish: 'tęcza', english: 'rainbow', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_013', polish: 'temperatura', english: 'temperature', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_014', polish: 'gorąco', english: 'hot', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_015', polish: 'zimno', english: 'cold', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },

  // ZWIERZĘTA (Animals)
  { id: 'animals_001', polish: 'pies', english: 'dog', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_002', polish: 'kot', english: 'cat', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_003', polish: 'koń', english: 'horse', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_004', polish: 'krowa', english: 'cow', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_005', polish: 'świnia', english: 'pig', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_006', polish: 'owca', english: 'sheep', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_007', polish: 'koza', english: 'goat', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_008', polish: 'kurczak', english: 'chicken', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_009', polish: 'królik', english: 'rabbit', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_010', polish: 'słoń', english: 'elephant', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_011', polish: 'lew', english: 'lion', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_012', polish: 'tygrys', english: 'tiger', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_013', polish: 'niedźwiedź', english: 'bear', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_014', polish: 'małpa', english: 'monkey', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_015', polish: 'żyrafa', english: 'giraffe', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_016', polish: 'zebra', english: 'zebra', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_017', polish: 'wilk', english: 'wolf', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_018', polish: 'lis', english: 'fox', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_019', polish: 'jeleń', english: 'deer', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_020', polish: 'wiewiórka', english: 'squirrel', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },

  // PTAKI (Birds)
  { id: 'birds_001', polish: 'ptak', english: 'bird', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_002', polish: 'orzeł', english: 'eagle', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_003', polish: 'sowa', english: 'owl', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_004', polish: 'gołąb', english: 'pigeon', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_005', polish: 'wrona', english: 'crow', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_006', polish: 'papuga', english: 'parrot', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_007', polish: 'pingwin', english: 'penguin', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_008', polish: 'łabędź', english: 'swan', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_009', polish: 'flamingo', english: 'flamingo', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_010', polish: 'pelikan', english: 'pelican', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },

  // ROŚLINY (Plants)
  { id: 'plants_001', polish: 'drzewo', english: 'tree', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_002', polish: 'kwiat', english: 'flower', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_003', polish: 'róża', english: 'rose', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_004', polish: 'tulipan', english: 'tulip', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_005', polish: 'słonecznik', english: 'sunflower', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_006', polish: 'trawa', english: 'grass', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_007', polish: 'krzak', english: 'bush', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_008', polish: 'liść', english: 'leaf', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_009', polish: 'gałąź', english: 'branch', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_010', polish: 'korzeń', english: 'root', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_011', polish: 'nasiono', english: 'seed', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_012', polish: 'kaktus', english: 'cactus', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },

  // ZBIORNIKI WODNE (Water Bodies)
  { id: 'water_bodies_001', polish: 'rzeka', english: 'river', category: 'environment', subcategory: 'water-bodies', difficulty: 'beginner' },
  { id: 'water_bodies_002', polish: 'jezioro', english: 'lake', category: 'environment', subcategory: 'water-bodies', difficulty: 'beginner' },
  { id: 'water_bodies_003', polish: 'strumień', english: 'stream', category: 'environment', subcategory: 'water-bodies', difficulty: 'intermediate' },
  { id: 'water_bodies_004', polish: 'wodospad', english: 'waterfall', category: 'environment', subcategory: 'water-bodies', difficulty: 'intermediate' },
  { id: 'water_bodies_005', polish: 'staw', english: 'pond', category: 'environment', subcategory: 'water-bodies', difficulty: 'intermediate' },
  { id: 'water_bodies_006', polish: 'kanał', english: 'canal', category: 'environment', subcategory: 'water-bodies', difficulty: 'intermediate' },
  { id: 'water_bodies_007', polish: 'zatoka', english: 'bay', category: 'environment', subcategory: 'water-bodies', difficulty: 'intermediate' },
  { id: 'water_bodies_008', polish: 'port', english: 'port', category: 'environment', subcategory: 'water-bodies', difficulty: 'beginner' },

  // PORY ROKU (Seasons)
  { id: 'seasons_001', polish: 'wiosna', english: 'spring', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_002', polish: 'lato', english: 'summer', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_003', polish: 'jesień', english: 'autumn', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_004', polish: 'zima', english: 'winter', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_005', polish: 'pora roku', english: 'season', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_006', polish: 'kwiecień', english: 'April', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_007', polish: 'maj', english: 'May', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_008', polish: 'czerwiec', english: 'June', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_009', polish: 'lipiec', english: 'July', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_010', polish: 'sierpień', english: 'August', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_011', polish: 'wrzesień', english: 'September', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_012', polish: 'październik', english: 'October', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_013', polish: 'listopad', english: 'November', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_014', polish: 'grudzień', english: 'December', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_015', polish: 'styczeń', english: 'January', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_016', polish: 'luty', english: 'February', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },
  { id: 'seasons_017', polish: 'marzec', english: 'March', category: 'environment', subcategory: 'seasons', difficulty: 'beginner' },

  // KATASTROFY NATURALNE (Natural Disasters)
  { id: 'disasters_001', polish: 'trzęsienie ziemi', english: 'earthquake', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_002', polish: 'powódź', english: 'flood', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_003', polish: 'pożar', english: 'fire', category: 'environment', subcategory: 'natural-disasters', difficulty: 'beginner' },
  { id: 'disasters_004', polish: 'huragan', english: 'hurricane', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_005', polish: 'tornado', english: 'tornado', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_006', polish: 'lawina', english: 'avalanche', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_007', polish: 'susza', english: 'drought', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_008', polish: 'tsunami', english: 'tsunami', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },
  { id: 'disasters_009', polish: 'erupcja wulkanu', english: 'volcanic eruption', category: 'environment', subcategory: 'natural-disasters', difficulty: 'advanced' },
  { id: 'disasters_010', polish: 'burza', english: 'storm', category: 'environment', subcategory: 'natural-disasters', difficulty: 'intermediate' },

  // OCHRONA ŚRODOWISKA (Conservation & Ecology)
  { id: 'conservation_001', polish: 'recykling', english: 'recycling', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_002', polish: 'ochrona środowiska', english: 'environmental protection', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_003', polish: 'zanieczyszczenie', english: 'pollution', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_004', polish: 'ekologia', english: 'ecology', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_005', polish: 'środowisko', english: 'environment', category: 'environment', subcategory: 'conservation', difficulty: 'beginner' },
  { id: 'conservation_006', polish: 'ochrona przyrody', english: 'nature conservation', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_007', polish: 'park narodowy', english: 'national park', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_008', polish: 'rezerwat', english: 'reserve', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_009', polish: 'gatunek zagrożony', english: 'endangered species', category: 'environment', subcategory: 'conservation', difficulty: 'intermediate' },
  { id: 'conservation_010', polish: 'zrównoważony rozwój', english: 'sustainable development', category: 'environment', subcategory: 'conservation', difficulty: 'advanced' },

  // OWADY I MAŁE ZWIERZĘTA (Insects & Small Animals)
  { id: 'insects_001', polish: 'pszczoła', english: 'bee', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_002', polish: 'motyl', english: 'butterfly', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_003', polish: 'mrówka', english: 'ant', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_004', polish: 'pająk', english: 'spider', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_005', polish: 'żaba', english: 'frog', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_006', polish: 'wąż', english: 'snake', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_007', polish: 'jaszczurka', english: 'lizard', category: 'environment', subcategory: 'insects', difficulty: 'intermediate' },
  { id: 'insects_008', polish: 'ślimak', english: 'snail', category: 'environment', subcategory: 'insects', difficulty: 'intermediate' },
  { id: 'insects_009', polish: 'dżdżownica', english: 'earthworm', category: 'environment', subcategory: 'insects', difficulty: 'intermediate' },
  { id: 'insects_010', polish: 'komar', english: 'mosquito', category: 'environment', subcategory: 'insects', difficulty: 'intermediate' },
  { id: 'insects_011', polish: 'much', english: 'fly', category: 'environment', subcategory: 'insects', difficulty: 'beginner' },
  { id: 'insects_012', polish: 'os', english: 'wasp', category: 'environment', subcategory: 'insects', difficulty: 'intermediate' },

  // PRZYDATNE ZWROTY (Useful Phrases - Environment)
  { id: 'environment_phrases_001', polish: 'jaka jest pogoda?', english: 'what is the weather?', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_002', polish: 'jest ładnie', english: 'it is nice', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_003', polish: 'pada deszcz', english: 'it is raining', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_004', polish: 'wieje wiatr', english: 'wind is blowing', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_005', polish: 'jest zimno', english: 'it is cold', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_006', polish: 'jest gorąco', english: 'it is hot', category: 'environment', subcategory: 'useful-phrases', difficulty: 'beginner' },
  { id: 'environment_phrases_007', polish: 'chronimy środowisko', english: 'we protect the environment', category: 'environment', subcategory: 'useful-phrases', difficulty: 'intermediate' },
  { id: 'environment_phrases_008', polish: 'piękna natura', english: 'beautiful nature', category: 'environment', subcategory: 'useful-phrases', difficulty: 'intermediate' },
  { id: 'environment_phrases_009', polish: 'świeże powietrze', english: 'fresh air', category: 'environment', subcategory: 'useful-phrases', difficulty: 'intermediate' },
  { id: 'environment_phrases_010', polish: 'dzień jest słoneczny', english: 'the day is sunny', category: 'environment', subcategory: 'useful-phrases', difficulty: 'intermediate' },
];

export async function seedEnvironmentVocabulary() {
  const { db, removeDuplicateVocabulary } = await import('@/utils/database');
  
  try {
    // First, remove any existing duplicates in the environment category
    await removeDuplicateVocabulary();
    
    // Get existing environment vocabulary
    const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
    const existingIds = new Set(existingEnvironment.map(w => w.id));
    
    // Also check for duplicates by Polish word + subcategory (case-insensitive)
    const existingByPolish = new Map<string, VocabularyWord>();
    for (const word of existingEnvironment) {
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      if (!existingByPolish.has(key)) {
        existingByPolish.set(key, word);
      }
    }
    
    // Filter out words that already exist (by ID or by Polish word + subcategory)
    const newWords = environmentVocabulary.filter(word => {
      if (existingIds.has(word.id)) return false;
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      return !existingByPolish.has(key);
    });
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new environment words`);
    }
    
    // Remove duplicates again after adding (in case of any edge cases)
    await removeDuplicateVocabulary();
    
    // Update total word count
    const totalCount = await db.vocabulary.where('category').equals('environment').count();
    await db.categories.update('environment', { totalWords: totalCount });
    console.log(`✅ Environment vocabulary: ${totalCount} total words (${environmentVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      await removeDuplicateVocabulary();
      const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
      const existingIds = new Set(existingEnvironment.map(w => w.id));
      const existingByPolish = new Map<string, VocabularyWord>();
      for (const word of existingEnvironment) {
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        if (!existingByPolish.has(key)) {
          existingByPolish.set(key, word);
        }
      }
      const newWords = environmentVocabulary.filter(word => {
        if (existingIds.has(word.id)) return false;
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        return !existingByPolish.has(key);
      });
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
          await removeDuplicateVocabulary();
          const totalCount = await db.vocabulary.where('category').equals('environment').count();
          await db.categories.update('environment', { totalWords: totalCount });
          console.log(`✅ Added ${newWords.length} new environment words. Total: ${totalCount}`);
        } catch (e) {
          console.error('Error adding remaining environment words:', e);
        }
      }
      return true;
    }
    console.error('Error seeding environment vocabulary:', error);
    return false;
  }
}
