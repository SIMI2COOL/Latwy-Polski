import { VocabularyWord } from '@/types';

export const studyVocabulary: VocabularyWord[] = [
  // SZKOŁA (School)
  { id: 'school_001', polish: 'szkoła', spanish: 'school', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_002', polish: 'przedszkole', spanish: 'kindergarten', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_003', polish: 'szkoła podstawowa', spanish: 'elementary school', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_004', polish: 'liceum', spanish: 'high school', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_005', polish: 'uniwersytet', spanish: 'university', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_006', polish: 'klasa', spanish: 'classroom', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_007', polish: 'tablica', spanish: 'blackboard', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_008', polish: 'biurko', spanish: 'desk', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_009', polish: 'nauczyciel', spanish: 'teacher', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_010', polish: 'uczeń', spanish: 'student', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_011', polish: 'dyrektor', spanish: 'principal', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_012', polish: 'biblioteka', spanish: 'library', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_013', polish: 'stołówka', spanish: 'cafeteria', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_014', polish: 'boisko szkolne', spanish: 'playground', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_015', polish: 'dzwonek', spanish: 'bell', category: 'study', subcategory: 'school', difficulty: 'intermediate' },

  // NAUKA (Learning)
  { id: 'learning_001', polish: 'uczyć się', spanish: 'to study', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_002', polish: 'czytać', spanish: 'to read', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_003', polish: 'pisać', spanish: 'to write', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_004', polish: 'liczyć', spanish: 'to count', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_005', polish: 'lekcja', spanish: 'lesson', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_006', polish: 'przedmiot', spanish: 'subject', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_007', polish: 'egzamin', spanish: 'exam', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_008', polish: 'test', spanish: 'test', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_009', polish: 'praca domowa', spanish: 'homework', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_010', polish: 'zadanie', spanish: 'assignment', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_011', polish: 'pytanie', spanish: 'question', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_012', polish: 'odpowiedź', spanish: 'answer', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_013', polish: 'błąd', spanish: 'mistake', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_014', polish: 'ocena', spanish: 'grade', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_015', polish: 'stopień', spanish: 'mark', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },

  // MATERIAŁY SZKOLNE (School Supplies)
  { id: 'supplies_001', polish: 'książka', spanish: 'book', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_002', polish: 'zeszyt', spanish: 'notebook', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_003', polish: 'długopis', spanish: 'pen', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_004', polish: 'ołówek', spanish: 'pencil', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_005', polish: 'gumka', spanish: 'eraser', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_006', polish: 'temperówka', spanish: 'pencil sharpener', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_007', polish: 'linijka', spanish: 'ruler', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_008', polish: 'kredka', spanish: 'crayon', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_009', polish: 'flamaster', spanish: 'marker', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_010', polish: 'zakreślacz', spanish: 'highlighter', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_011', polish: 'klej', spanish: 'glue', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_012', polish: 'nożyczki', spanish: 'scissors', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_013', polish: 'plecak', spanish: 'backpack', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_014', polish: 'piórnik', spanish: 'pencil case', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_015', polish: 'kalkulator', spanish: 'calculator', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },

  // PRZEDMIOTY (Subjects)
  { id: 'subjects_001', polish: 'matematyka', spanish: 'mathematics', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_002', polish: 'język polski', spanish: 'Polish language', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_003', polish: 'język angielski', spanish: 'English language', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_004', polish: 'historia', spanish: 'history', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_005', polish: 'geografia', spanish: 'geography', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_006', polish: 'biologia', spanish: 'biology', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_007', polish: 'chemia', spanish: 'chemistry', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_008', polish: 'fizyka', spanish: 'physics', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_009', polish: 'wychowanie fizyczne', spanish: 'physical education', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_010', polish: 'muzyka', spanish: 'music', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_011', polish: 'plastyka', spanish: 'art', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_012', polish: 'informatyka', spanish: 'computer science', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },

  // NAUKA JĘZYKÓW (Language Learning)
  { id: 'language_001', polish: 'język', spanish: 'language', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_002', polish: 'słowo', spanish: 'word', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_003', polish: 'zdanie', spanish: 'sentence', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_004', polish: 'gramatyka', spanish: 'grammar', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_005', polish: 'słownictwo', spanish: 'vocabulary', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_006', polish: 'wymowa', spanish: 'pronunciation', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_007', polish: 'tłumaczenie', spanish: 'translation', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_008', polish: 'słownik', spanish: 'dictionary', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_009', polish: 'ćwiczenie', spanish: 'exercise', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_010', polish: 'mówić', spanish: 'to speak', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
];

export async function seedStudyVocabulary() {
  const { db } = await import('@/utils/database');
  
  try {
    // Get existing study vocabulary IDs
    const existingStudy = await db.vocabulary.where('category').equals('study').toArray();
    const existingIds = new Set(existingStudy.map(w => w.id));
    
    // Filter out words that already exist
    const newWords = studyVocabulary.filter(word => !existingIds.has(word.id));
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new study words`);
    }
    
    // Always update total word count
    const totalCount = await db.vocabulary.where('category').equals('study').count();
    await db.categories.update('study', { totalWords: totalCount });
    console.log(`✅ Study vocabulary: ${totalCount} total words (${studyVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      const existingStudy = await db.vocabulary.where('category').equals('study').toArray();
      const existingIds = new Set(existingStudy.map(w => w.id));
      const newWords = studyVocabulary.filter(word => !existingIds.has(word.id));
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
        } catch (e) {
          console.error('Error adding remaining study words:', e);
        }
      }
      
      // Always update total word count
      const totalCount = await db.vocabulary.where('category').equals('study').count();
      await db.categories.update('study', { totalWords: totalCount });
      console.log(`✅ Study vocabulary: ${totalCount} total words`);
      return true;
    }
    console.error('Error seeding study vocabulary:', error);
    return false;
  }
}
