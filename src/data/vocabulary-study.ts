import { VocabularyWord } from '@/types';

export const studyVocabulary: VocabularyWord[] = [
  // SZKOŁA (Escuela)
  { id: 'school_001', polish: 'szkoła', spanish: 'escuela', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_002', polish: 'przedszkole', spanish: 'guardería', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_003', polish: 'szkoła podstawowa', spanish: 'escuela primaria', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_004', polish: 'liceum', spanish: 'instituto', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_005', polish: 'uniwersytet', spanish: 'universidad', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_006', polish: 'klasa', spanish: 'aula', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_007', polish: 'tablica', spanish: 'pizarra', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_008', polish: 'biurko', spanish: 'escritorio', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_009', polish: 'nauczyciel', spanish: 'profesor', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_010', polish: 'uczeń', spanish: 'estudiante', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_011', polish: 'dyrektor', spanish: 'director', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_012', polish: 'biblioteka', spanish: 'biblioteca', category: 'study', subcategory: 'school', difficulty: 'beginner' },
  { id: 'school_013', polish: 'stołówka', spanish: 'comedor', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_014', polish: 'boisko szkolne', spanish: 'patio de recreo', category: 'study', subcategory: 'school', difficulty: 'intermediate' },
  { id: 'school_015', polish: 'dzwonek', spanish: 'timbre', category: 'study', subcategory: 'school', difficulty: 'intermediate' },

  // NAUKA (Aprendizaje)
  { id: 'learning_001', polish: 'uczyć się', spanish: 'estudiar', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_002', polish: 'czytać', spanish: 'leer', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_003', polish: 'pisać', spanish: 'escribir', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_004', polish: 'liczyć', spanish: 'contar', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_005', polish: 'lekcja', spanish: 'lección', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_006', polish: 'przedmiot', spanish: 'asignatura', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_007', polish: 'egzamin', spanish: 'examen', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_008', polish: 'test', spanish: 'prueba', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_009', polish: 'praca domowa', spanish: 'deberes', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_010', polish: 'zadanie', spanish: 'tarea', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_011', polish: 'pytanie', spanish: 'pregunta', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_012', polish: 'odpowiedź', spanish: 'respuesta', category: 'study', subcategory: 'learning', difficulty: 'beginner' },
  { id: 'learning_013', polish: 'błąd', spanish: 'error', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_014', polish: 'ocena', spanish: 'nota', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },
  { id: 'learning_015', polish: 'stopień', spanish: 'calificación', category: 'study', subcategory: 'learning', difficulty: 'intermediate' },

  // MATERIAŁY SZKOLNE (Materiales escolares)
  { id: 'supplies_001', polish: 'książka', spanish: 'libro', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_002', polish: 'zeszyt', spanish: 'cuaderno', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_003', polish: 'długopis', spanish: 'bolígrafo', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_004', polish: 'ołówek', spanish: 'lápiz', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_005', polish: 'gumka', spanish: 'goma', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_006', polish: 'temperówka', spanish: 'sacapuntas', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_007', polish: 'linijka', spanish: 'regla', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_008', polish: 'kredka', spanish: 'lápiz de color', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_009', polish: 'flamaster', spanish: 'rotulador', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_010', polish: 'zakreślacz', spanish: 'marcador', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_011', polish: 'klej', spanish: 'pegamento', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_012', polish: 'nożyczki', spanish: 'tijeras', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_013', polish: 'plecak', spanish: 'mochila', category: 'study', subcategory: 'supplies', difficulty: 'beginner' },
  { id: 'supplies_014', polish: 'piórnik', spanish: 'estuche', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },
  { id: 'supplies_015', polish: 'kalkulator', spanish: 'calculadora', category: 'study', subcategory: 'supplies', difficulty: 'intermediate' },

  // PRZEDMIOTY (Asignaturas)
  { id: 'subjects_001', polish: 'matematyka', spanish: 'matemáticas', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_002', polish: 'język polski', spanish: 'idioma polaco', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_003', polish: 'język angielski', spanish: 'idioma inglés', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_004', polish: 'historia', spanish: 'historia', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_005', polish: 'geografia', spanish: 'geografía', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_006', polish: 'biologia', spanish: 'biología', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_007', polish: 'chemia', spanish: 'química', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_008', polish: 'fizyka', spanish: 'física', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_009', polish: 'wychowanie fizyczne', spanish: 'educación física', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_010', polish: 'muzyka', spanish: 'música', category: 'study', subcategory: 'subjects', difficulty: 'beginner' },
  { id: 'subjects_011', polish: 'plastyka', spanish: 'arte', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },
  { id: 'subjects_012', polish: 'informatyka', spanish: 'informática', category: 'study', subcategory: 'subjects', difficulty: 'intermediate' },

  // NAUKA JĘZYKÓW (Aprendizaje de idiomas)
  { id: 'language_001', polish: 'język', spanish: 'idioma', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_002', polish: 'słowo', spanish: 'palabra', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_003', polish: 'zdanie', spanish: 'oración', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },
  { id: 'language_004', polish: 'gramatyka', spanish: 'gramática', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_005', polish: 'słownictwo', spanish: 'vocabulario', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_006', polish: 'wymowa', spanish: 'pronunciación', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_007', polish: 'tłumaczenie', spanish: 'traducción', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_008', polish: 'słownik', spanish: 'diccionario', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_009', polish: 'ćwiczenie', spanish: 'ejercicio', category: 'study', subcategory: 'language-learning', difficulty: 'intermediate' },
  { id: 'language_010', polish: 'mówić', spanish: 'hablar', category: 'study', subcategory: 'language-learning', difficulty: 'beginner' },

  // NAUKI (Ciencias)
  { id: 'sciences_001', polish: 'nauka', spanish: 'ciencia', category: 'study', subcategory: 'sciences', difficulty: 'beginner' },
  { id: 'sciences_002', polish: 'biologia', spanish: 'biología', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_003', polish: 'chemia', spanish: 'química', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_004', polish: 'fizyka', spanish: 'física', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_005', polish: 'matematyka', spanish: 'matemáticas', category: 'study', subcategory: 'sciences', difficulty: 'beginner' },
  { id: 'sciences_006', polish: 'astronomia', spanish: 'astronomía', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_007', polish: 'geologia', spanish: 'geología', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_008', polish: 'eksperyment', spanish: 'experimento', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_009', polish: 'laboratorium', spanish: 'laboratorio', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
  { id: 'sciences_010', polish: 'naukowiec', spanish: 'científico', category: 'study', subcategory: 'sciences', difficulty: 'intermediate' },
];

export async function seedStudyVocabulary() {
  const { db } = await import('@/utils/database');
  
  try {
    // Get existing study vocabulary IDs
    const existingStudy = await db.vocabulary.where('category').equals('study').toArray();
    const existingIds = new Set(existingStudy.map(w => w.id));
    
    // Update existing words with correct Spanish translations
    const wordsToUpdate = studyVocabulary.filter(word => existingIds.has(word.id));
    for (const word of wordsToUpdate) {
      await db.vocabulary.update(word.id, { spanish: word.spanish });
    }
    
    // Filter out words that already exist
    const newWords = studyVocabulary.filter(word => !existingIds.has(word.id));
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new study words`);
    }
    
    // Always update total word count
    const totalCount = await db.vocabulary.where('category').equals('study').count();
    await db.categories.update('study', { totalWords: totalCount });
    console.log(`✅ Study vocabulary: ${totalCount} total words (${studyVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      const existingStudy = await db.vocabulary.where('category').equals('study').toArray();
      const existingIds = new Set(existingStudy.map(w => w.id));
      
      // Update existing words
      const wordsToUpdate = studyVocabulary.filter(word => existingIds.has(word.id));
      for (const word of wordsToUpdate) {
        await db.vocabulary.update(word.id, { spanish: word.spanish });
      }
      
      const newWords = studyVocabulary.filter(word => !existingIds.has(word.id));
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
        } catch (e) {
          console.error('Error adding remaining study words:', e);
        }
      }
      
      // Always update total word count
      const totalCount = await db.vocabulary.where('category').equals('study').count();
      await db.categories.update('study', { totalWords: totalCount });
      console.log(`✅ Study vocabulary: ${totalCount} total words`);
      return true;
    }
    console.error('Error seeding study vocabulary:', error);
    return false;
  }
}
