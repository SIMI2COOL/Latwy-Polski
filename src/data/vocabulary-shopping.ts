import { VocabularyWord } from '@/types';

export const shoppingVocabulary: VocabularyWord[] = [
  // CENTRUM HANDLOWE (Centro Comercial)
  { id: 'shop_center_001', polish: 'centrum handlowe', spanish: 'centro comercial', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_002', polish: 'sklep', spanish: 'tienda', category: 'shopping', subcategory: 'shopping-center', difficulty: 'beginner' },
  { id: 'shop_center_003', polish: 'supermarket', spanish: 'supermercado', category: 'shopping', subcategory: 'shopping-center', difficulty: 'beginner' },
  { id: 'shop_center_004', polish: 'butik', spanish: 'boutique', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_005', polish: 'dom towarowy', spanish: 'grandes almacenes', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_006', polish: 'witryna sklepowa', spanish: 'escaparate', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_007', polish: 'schody ruchome', spanish: 'escalera mecánica', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_008', polish: 'kasa', spanish: 'caja', category: 'shopping', subcategory: 'shopping-center', difficulty: 'beginner' },
  { id: 'shop_center_009', polish: 'klient', spanish: 'cliente', category: 'shopping', subcategory: 'shopping-center', difficulty: 'beginner' },
  { id: 'shop_center_010', polish: 'sprzedawca', spanish: 'vendedor', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_011', polish: 'kolejka', spanish: 'cola', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_012', polish: 'koszyk', spanish: 'cesta', category: 'shopping', subcategory: 'shopping-center', difficulty: 'beginner' },
  { id: 'shop_center_013', polish: 'wózek sklepowy', spanish: 'carrito', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_014', polish: 'torba na zakupy', spanish: 'bolsa de compras', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },
  { id: 'shop_center_015', polish: 'wyprzedaż', spanish: 'rebajas', category: 'shopping', subcategory: 'shopping-center', difficulty: 'intermediate' },

  // SKLEP SPOŻYWCZY (Tienda de Comestibles)
  { id: 'grocery_001', polish: 'sklep spożywczy', spanish: 'tienda de comestibles', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_002', polish: 'piekarnia', spanish: 'panadería', category: 'shopping', subcategory: 'grocery', difficulty: 'beginner' },
  { id: 'grocery_003', polish: 'cukiernia', spanish: 'pastelería', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_004', polish: 'sklep mięsny', spanish: 'carnicería', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_005', polish: 'sklep rybny', spanish: 'pescadería', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_006', polish: 'warzywniak', spanish: 'verdulería', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_007', polish: 'sklep z napojami', spanish: 'bebidas', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },
  { id: 'grocery_008', polish: 'sklep ekologiczny', spanish: 'tienda ecológica', category: 'shopping', subcategory: 'grocery', difficulty: 'advanced' },
  { id: 'grocery_009', polish: 'targ', spanish: 'mercado', category: 'shopping', subcategory: 'grocery', difficulty: 'beginner' },
  { id: 'grocery_010', polish: 'stragan', spanish: 'puesto', category: 'shopping', subcategory: 'grocery', difficulty: 'intermediate' },

  // KUPOWANIE (Comprar)
  { id: 'buying_001', polish: 'kupować', spanish: 'comprar', category: 'shopping', subcategory: 'buying', difficulty: 'beginner' },
  { id: 'buying_002', polish: 'sprzedawać', spanish: 'vender', category: 'shopping', subcategory: 'buying', difficulty: 'beginner' },
  { id: 'buying_003', polish: 'zapłacić', spanish: 'pagar', category: 'shopping', subcategory: 'buying', difficulty: 'beginner' },
  { id: 'buying_004', polish: 'cena', spanish: 'precio', category: 'shopping', subcategory: 'buying', difficulty: 'beginner' },
  { id: 'buying_005', polish: 'kosztować', spanish: 'costar', category: 'shopping', subcategory: 'buying', difficulty: 'beginner' },
  { id: 'buying_006', polish: 'reszta', spanish: 'cambio', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_007', polish: 'paragon', spanish: 'recibo', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_008', polish: 'gotówka', spanish: 'efectivo', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_009', polish: 'karta płatnicza', spanish: 'tarjeta de crédito', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_010', polish: 'rabat', spanish: 'descuento', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_011', polish: 'zwrot', spanish: 'devolución', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_012', polish: 'wymiana', spanish: 'cambio', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_013', polish: 'przecena', spanish: 'rebaja', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_014', polish: 'promocja', spanish: 'promoción', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },
  { id: 'buying_015', polish: 'kupon', spanish: 'cupón', category: 'shopping', subcategory: 'buying', difficulty: 'intermediate' },

  // UBRANIA (Tienda de Ropa)
  { id: 'clothing_store_001', polish: 'sklep odzieżowy', spanish: 'tienda de ropa', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },
  { id: 'clothing_store_002', polish: 'przymierzalnia', spanish: 'probador', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },
  { id: 'clothing_store_003', polish: 'wieszak', spanish: 'percha', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },
  { id: 'clothing_store_004', polish: 'rozmiar', spanish: 'talla', category: 'shopping', subcategory: 'clothing-store', difficulty: 'beginner' },
  { id: 'clothing_store_005', polish: 'mały', spanish: 'pequeño', category: 'shopping', subcategory: 'clothing-store', difficulty: 'beginner' },
  { id: 'clothing_store_006', polish: 'średni', spanish: 'mediano', category: 'shopping', subcategory: 'clothing-store', difficulty: 'beginner' },
  { id: 'clothing_store_007', polish: 'duży', spanish: 'grande', category: 'shopping', subcategory: 'clothing-store', difficulty: 'beginner' },
  { id: 'clothing_store_008', polish: 'pasować', spanish: 'quedar bien', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },
  { id: 'clothing_store_009', polish: 'przymierzać', spanish: 'probarse', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },
  { id: 'clothing_store_010', polish: 'metka', spanish: 'etiqueta', category: 'shopping', subcategory: 'clothing-store', difficulty: 'intermediate' },

  // KSIĘGARNIA (Librería)
  { id: 'bookstore_001', polish: 'księgarnia', spanish: 'librería', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_002', polish: 'książka', spanish: 'libro', category: 'shopping', subcategory: 'bookstore', difficulty: 'beginner' },
  { id: 'bookstore_003', polish: 'gazeta', spanish: 'periódico', category: 'shopping', subcategory: 'bookstore', difficulty: 'beginner' },
  { id: 'bookstore_004', polish: 'czasopismo', spanish: 'revista', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_005', polish: 'komiks', spanish: 'cómic', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_006', polish: 'mapa', spanish: 'mapa', category: 'shopping', subcategory: 'bookstore', difficulty: 'beginner' },
  { id: 'bookstore_007', polish: 'kartka pocztowa', spanish: 'postal', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_008', polish: 'autor', spanish: 'autor', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_009', polish: 'bestseller', spanish: 'bestseller', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },
  { id: 'bookstore_010', polish: 'nowość', spanish: 'novedad', category: 'shopping', subcategory: 'bookstore', difficulty: 'intermediate' },

  // SUPERMERCADO (Sklep)
  { id: 'supermarket_001', polish: 'supermarket', spanish: 'supermercado', category: 'shopping', subcategory: 'supermarket', difficulty: 'beginner' },
  { id: 'supermarket_002', polish: 'sklep', spanish: 'tienda', category: 'shopping', subcategory: 'supermarket', difficulty: 'beginner' },
  { id: 'supermarket_003', polish: 'półka', spanish: 'estante', category: 'shopping', subcategory: 'supermarket', difficulty: 'intermediate' },
  { id: 'supermarket_004', polish: 'dział', spanish: 'sección', category: 'shopping', subcategory: 'supermarket', difficulty: 'intermediate' },
  { id: 'supermarket_005', polish: 'kasjer', spanish: 'cajero', category: 'shopping', subcategory: 'supermarket', difficulty: 'beginner' },
  { id: 'supermarket_006', polish: 'skaner', spanish: 'escáner', category: 'shopping', subcategory: 'supermarket', difficulty: 'intermediate' },
  { id: 'supermarket_007', polish: 'waga', spanish: 'balanza', category: 'shopping', subcategory: 'supermarket', difficulty: 'beginner' },
  { id: 'supermarket_008', polish: 'cena', spanish: 'precio', category: 'shopping', subcategory: 'supermarket', difficulty: 'beginner' },
  { id: 'supermarket_009', polish: 'promocja', spanish: 'oferta', category: 'shopping', subcategory: 'supermarket', difficulty: 'intermediate' },
  { id: 'supermarket_010', polish: 'paragon', spanish: 'ticket', category: 'shopping', subcategory: 'supermarket', difficulty: 'intermediate' },
];

export async function seedShoppingVocabulary() {
  const { db } = await import('@/utils/database');
  
  try {
    // Get existing shopping vocabulary IDs
    const existingShopping = await db.vocabulary.where('category').equals('shopping').toArray();
    const existingIds = new Set(existingShopping.map(w => w.id));
    
    // Update existing words with correct Spanish translations
    const wordsToUpdate = shoppingVocabulary.filter(word => existingIds.has(word.id));
    for (const word of wordsToUpdate) {
      await db.vocabulary.update(word.id, { spanish: word.spanish });
    }
    
    // Filter out words that already exist
    const newWords = shoppingVocabulary.filter(word => !existingIds.has(word.id));
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new shopping words`);
    }
    
    // Always update total word count
    const totalCount = await db.vocabulary.where('category').equals('shopping').count();
    await db.categories.update('shopping', { totalWords: totalCount });
    console.log(`✅ Shopping vocabulary: ${totalCount} total words (${shoppingVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      const existingShopping = await db.vocabulary.where('category').equals('shopping').toArray();
      const existingIds = new Set(existingShopping.map(w => w.id));
      
      // Update existing words
      const wordsToUpdate = shoppingVocabulary.filter(word => existingIds.has(word.id));
      for (const word of wordsToUpdate) {
        await db.vocabulary.update(word.id, { spanish: word.spanish });
      }
      
      const newWords = shoppingVocabulary.filter(word => !existingIds.has(word.id));
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
        } catch (e) {
          console.error('Error adding remaining shopping words:', e);
        }
      }
      
      // Always update total word count
      const totalCount = await db.vocabulary.where('category').equals('shopping').count();
      await db.categories.update('shopping', { totalWords: totalCount });
      console.log(`✅ Shopping vocabulary: ${totalCount} total words`);
      return true;
    }
    console.error('Error seeding shopping vocabulary:', error);
    return false;
  }
}
