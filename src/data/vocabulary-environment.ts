import { VocabularyWord } from '@/types';

export const environmentVocabulary: VocabularyWord[] = [
  // KOSMOS (Espacio)
  { id: 'space_001', polish: 'słońce', spanish: 'sol', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_002', polish: 'księżyc', spanish: 'luna', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_003', polish: 'gwiazda', spanish: 'estrella', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_004', polish: 'planeta', spanish: 'planeta', category: 'environment', subcategory: 'space', difficulty: 'beginner' },
  { id: 'space_005', polish: 'galaktyka', spanish: 'galaxia', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_006', polish: 'kometa', spanish: 'cometa', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_007', polish: 'meteor', spanish: 'meteoro', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_008', polish: 'satelita', spanish: 'satélite', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_009', polish: 'statek kosmiczny', spanish: 'nave espacial', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },
  { id: 'space_010', polish: 'astronauta', spanish: 'astronauta', category: 'environment', subcategory: 'space', difficulty: 'intermediate' },

  // ZIEMIA (Tierra)
  { id: 'earth_001', polish: 'kontynent', spanish: 'continente', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_002', polish: 'ocean', spanish: 'océano', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_003', polish: 'morze', spanish: 'mar', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_004', polish: 'wyspa', spanish: 'isla', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_005', polish: 'półwysep', spanish: 'península', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_006', polish: 'zatoka', spanish: 'bahía', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_007', polish: 'wybrzeże', spanish: 'costa', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_008', polish: 'plaża', spanish: 'playa', category: 'environment', subcategory: 'earth', difficulty: 'beginner' },
  { id: 'earth_009', polish: 'klif', spanish: 'acantilado', category: 'environment', subcategory: 'earth', difficulty: 'intermediate' },
  { id: 'earth_010', polish: 'rafa koralowa', spanish: 'arrecife de coral', category: 'environment', subcategory: 'earth', difficulty: 'advanced' },

  // KRAJOBRAZ (Paisaje)
  { id: 'landscape_001', polish: 'góra', spanish: 'montaña', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_002', polish: 'wzgórze', spanish: 'colina', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_003', polish: 'dolina', spanish: 'valle', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_004', polish: 'wulkan', spanish: 'volcán', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_005', polish: 'jaskinia', spanish: 'cueva', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_006', polish: 'pustynia', spanish: 'desierto', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_007', polish: 'las', spanish: 'bosque', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },
  { id: 'landscape_008', polish: 'dżungla', spanish: 'selva', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_009', polish: 'łąka', spanish: 'pradera', category: 'environment', subcategory: 'landscape', difficulty: 'intermediate' },
  { id: 'landscape_010', polish: 'pole', spanish: 'campo', category: 'environment', subcategory: 'landscape', difficulty: 'beginner' },

  // POGODA (Clima)
  { id: 'weather_001', polish: 'pogoda', spanish: 'clima', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_002', polish: 'słońce', spanish: 'sol', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_003', polish: 'deszcz', spanish: 'lluvia', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_004', polish: 'śnieg', spanish: 'nieve', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_005', polish: 'grad', spanish: 'granizo', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_006', polish: 'wiatr', spanish: 'viento', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_007', polish: 'burza', spanish: 'tormenta', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_008', polish: 'piorun', spanish: 'rayo', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_009', polish: 'grzmot', spanish: 'trueno', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_010', polish: 'mgła', spanish: 'niebla', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_011', polish: 'chmura', spanish: 'nube', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_012', polish: 'tęcza', spanish: 'arcoíris', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_013', polish: 'temperatura', spanish: 'temperatura', category: 'environment', subcategory: 'weather', difficulty: 'intermediate' },
  { id: 'weather_014', polish: 'gorąco', spanish: 'calor', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },
  { id: 'weather_015', polish: 'zimno', spanish: 'frío', category: 'environment', subcategory: 'weather', difficulty: 'beginner' },

  // ZWIERZĘTA (Animales)
  { id: 'animals_001', polish: 'pies', spanish: 'perro', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_002', polish: 'kot', spanish: 'gato', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_003', polish: 'koń', spanish: 'caballo', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_004', polish: 'krowa', spanish: 'vaca', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_005', polish: 'świnia', spanish: 'cerdo', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_006', polish: 'owca', spanish: 'oveja', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_007', polish: 'koza', spanish: 'cabra', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_008', polish: 'kurczak', spanish: 'pollo', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_009', polish: 'królik', spanish: 'conejo', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_010', polish: 'słoń', spanish: 'elefante', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_011', polish: 'lew', spanish: 'león', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_012', polish: 'tygrys', spanish: 'tigre', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_013', polish: 'niedźwiedź', spanish: 'oso', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_014', polish: 'małpa', spanish: 'mono', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_015', polish: 'żyrafa', spanish: 'jirafa', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_016', polish: 'zebra', spanish: 'cebra', category: 'environment', subcategory: 'animals', difficulty: 'beginner' },
  { id: 'animals_017', polish: 'wilk', spanish: 'lobo', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_018', polish: 'lis', spanish: 'zorro', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_019', polish: 'jeleń', spanish: 'ciervo', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },
  { id: 'animals_020', polish: 'wiewiórka', spanish: 'ardilla', category: 'environment', subcategory: 'animals', difficulty: 'intermediate' },

  // PTAKI (Aves)
  { id: 'birds_001', polish: 'ptak', spanish: 'pájaro', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_002', polish: 'orzeł', spanish: 'águila', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_003', polish: 'sowa', spanish: 'búho', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_004', polish: 'gołąb', spanish: 'paloma', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_005', polish: 'wrona', spanish: 'cuervo', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_006', polish: 'papuga', spanish: 'loro', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_007', polish: 'pingwin', spanish: 'pingüino', category: 'environment', subcategory: 'birds', difficulty: 'beginner' },
  { id: 'birds_008', polish: 'łabędź', spanish: 'cisne', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_009', polish: 'flamingo', spanish: 'flamenco', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },
  { id: 'birds_010', polish: 'pelikan', spanish: 'pelícano', category: 'environment', subcategory: 'birds', difficulty: 'intermediate' },

  // ROŚLINY (Plantas)
  { id: 'plants_001', polish: 'drzewo', spanish: 'árbol', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_002', polish: 'kwiat', spanish: 'flor', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_003', polish: 'róża', spanish: 'rosa', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_004', polish: 'tulipan', spanish: 'tulipán', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_005', polish: 'słonecznik', spanish: 'girasol', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_006', polish: 'trawa', spanish: 'hierba', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_007', polish: 'krzak', spanish: 'arbusto', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_008', polish: 'liść', spanish: 'hoja', category: 'environment', subcategory: 'plants', difficulty: 'beginner' },
  { id: 'plants_009', polish: 'gałąź', spanish: 'rama', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_010', polish: 'korzeń', spanish: 'raíz', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_011', polish: 'nasiono', spanish: 'semilla', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
  { id: 'plants_012', polish: 'kaktus', spanish: 'cactus', category: 'environment', subcategory: 'plants', difficulty: 'intermediate' },
];

export async function seedEnvironmentVocabulary() {
  const { db, removeDuplicateVocabulary } = await import('@/utils/database');
  
  try {
    // First, remove any existing duplicates in the environment category
    await removeDuplicateVocabulary();
    
    // Get existing environment vocabulary
    const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
    const existingIds = new Set(existingEnvironment.map(w => w.id));
    
    // Also check for duplicates by Polish word + subcategory (case-insensitive)
    const existingByPolish = new Map<string, VocabularyWord>();
    for (const word of existingEnvironment) {
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      if (!existingByPolish.has(key)) {
        existingByPolish.set(key, word);
      }
    }
    
    // Filter out words that already exist (by ID or by Polish word + subcategory)
    const newWords = environmentVocabulary.filter(word => {
      if (existingIds.has(word.id)) return false;
      const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
      return !existingByPolish.has(key);
    });
    
    if (newWords.length > 0) {
      await db.vocabulary.bulkAdd(newWords);
      console.log(`✅ Added ${newWords.length} new environment words`);
    }
    
    // Remove duplicates again after adding (in case of any edge cases)
    await removeDuplicateVocabulary();
    
    // Update total word count
    const totalCount = await db.vocabulary.where('category').equals('environment').count();
    await db.categories.update('environment', { totalWords: totalCount });
    console.log(`✅ Environment vocabulary: ${totalCount} total words (${environmentVocabulary.length} in file)`);
    return true;
  } catch (error) {
    if (error instanceof Error && error.name === 'ConstraintError') {
      // Some words might already exist, try to add the rest
      await removeDuplicateVocabulary();
      const existingEnvironment = await db.vocabulary.where('category').equals('environment').toArray();
      const existingIds = new Set(existingEnvironment.map(w => w.id));
      const existingByPolish = new Map<string, VocabularyWord>();
      for (const word of existingEnvironment) {
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        if (!existingByPolish.has(key)) {
          existingByPolish.set(key, word);
        }
      }
      const newWords = environmentVocabulary.filter(word => {
        if (existingIds.has(word.id)) return false;
        const key = `${word.subcategory}_${word.polish.toLowerCase().trim()}`;
        return !existingByPolish.has(key);
      });
      
      if (newWords.length > 0) {
        try {
          await db.vocabulary.bulkAdd(newWords);
          await removeDuplicateVocabulary();
          const totalCount = await db.vocabulary.where('category').equals('environment').count();
          await db.categories.update('environment', { totalWords: totalCount });
          console.log(`✅ Added ${newWords.length} new environment words. Total: ${totalCount}`);
        } catch (e) {
          console.error('Error adding remaining environment words:', e);
        }
      }
      return true;
    }
    console.error('Error seeding environment vocabulary:', error);
    return false;
  }
}
